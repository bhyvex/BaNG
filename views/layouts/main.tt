<!DOCTYPE HTML>
<html>
    <head>
        <title>BaNG - 2013</title>
        <meta charset="utf-8">
        <link rel="icon" type="image/ico" href="/favicon">
        <link rel="stylesheet" href="/css/standard.css">
        <link rel="stylesheet" href="/css/tablesorter.css">
        <script src="/javascripts/jquery.js"></script>
        <script src="/javascripts/jquery.uitablefilter.js" type="text/javascript"></script>
        <script src="/javascripts/jquery.tablesorter.js"></script>
        <script src="/javascripts/jquery.tablesorter.widgets.js"></script>
        <script>
            function updateFilter() {
                var filterTable = $('#configslist, #restorelist, #loglist')
                $.uiTableFilter( filterTable, $("#filter").val() );
                var countVisible = $('#configslist > tbody > tr:visible').length;
                $('#countVisible').html(countVisible);
            }

            function initializeTablesorter() {
                $('#config').tablesorter({
                    sortList: [[0,0]],
                    widgets: [ 'stickyHeaders' ],
                    widgetOptions: {
                        stickyHeaders : 'tablesorter-stickyHeader',
                    }
                });
                $('#configslist').tablesorter({
                    sortList: [[0,0]],
                    widgets: [ 'stickyHeaders' ],
                    widgetOptions: {
                        stickyHeaders : 'tablesorter-stickyHeader',
                    }
                });
                $('#restorelist').tablesorter({
                    sortList: [[0,0],[1,0]],
                    widgets: [ 'stickyHeaders' ],
                    widgetOptions: {
                        stickyHeaders : 'tablesorter-stickyHeader',
                    }
                });
                $('#config_default').tablesorter();
            }

            function collapseDetails() {
                $("#configslist div.conf_details").hide();
                $("#configslist td").click(function(){
                    $(this).find("div.conf_details").toggle();
                    $(this).find(".arrow").toggleClass("up");
                });

                $("#restorelist div.restore_details").hide();
                $("#restorelist td").click(function(){
                    $(this).find("div.restore_details").toggle();
                    $(this).find(".arrow").toggleClass("up");
                });

                $("#logdateslist div.log_details").hide();
                $("#logdateslist td").click(function(){
                    $(this).find("div.log_details").toggle();
                    $(this).find(".arrow").toggleClass("up");
                });
            }

            function initializeEvents() {
                $("#filter").keyup(function() {
                    updateFilter();
                })

                $('#filter-form').submit(function(){
                    return false;
                });
            }

            function initializeAll() {
                updateFilter();
                initializeEvents();
                initializeTablesorter();
                collapseDetails();
            }

            $(document).ready(function(){
                initializeAll();
            });

        </script>
    </head>
    <body>
        <% INCLUDE header.tt %>
        <div id="content">
            <% content %>
        </div>
    </body>
</html>

